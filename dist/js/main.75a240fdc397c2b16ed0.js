!function(){"use strict";var e={869:function(e,t,a){e.exports=a.p+"assets/images/no-image.jpg"},767:function(e,t,a){e.exports=a.p+"assets/images/oval-blanco.svg"},214:function(e,t,a){e.exports=a.p+"assets/images/oval-negro.svg"},209:function(e,t,a){e.exports=a.p+"assets/favicon/favicon.ico"}},t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n](r,r.exports,a),r.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"}(),function(){var e=document,t=window,n={arrayUsers:[],page:1,moviesForPage:10},r="/?apikey=".concat("7bdaf2a9"),s="".concat("https://www.omdbapi.com").concat(r,"&"),i="".concat(s,"i="),o="".concat(s,"s="),c={method:"GET","Content-type":"application/json"},d=()=>{document.location.href="index.html"},l=()=>{document.location.href="search.html"},m=[],v=()=>{var e=Math.random().toString(16).substr(2);return void 0===m.find((t=>t===e))?m.push(e):v(),e},p=v,_=()=>{localStorage.setItem("users",JSON.stringify(n.arrayUsers))},u=e=>{sessionStorage.setItem("session",JSON.stringify(e))},h=()=>JSON.parse(localStorage.getItem("users")),f=()=>JSON.parse(sessionStorage.getItem("session")),g="^([A-Za-z]{6,12})$",L="^([A-Za-z0-9]{6,8})$",E=e.querySelectorAll(".login-input"),y=e.getElementById("formLogin"),C=e=>{var t=f().id;n.arrayUsers=h(),n.arrayUsers.find((a=>{var n=a;return n.id===t&&(n.lastSearch=e,u(a),_(),!0)}))},I=()=>{var e,t=f().id;return n.arrayUsers=h(),n.arrayUsers.find((a=>a.id===t&&(e=a.lastSearch,!0))),e},b=e.querySelector(".main-search__favorites"),T=()=>{if(t.location.pathname.includes("/search.html")){var e=f().id;n.arrayUsers=h(),n.arrayUsers.find((t=>{if(t.id===e){if(t.favorites.length>0)return b.classList.remove("none"),!0;b.classList.add("none")}return!1}))}},S=e=>{var t=f().id;n.arrayUsers=h();var a={imdbId:e};n.arrayUsers.find((n=>{if(n.id===t){var r=n.favorites.findIndex((t=>t.imdbId===e));-1===r?n.favorites.push(a):n.favorites.splice(r,1),u(n),_()}return!1})),T()};function A(e,t,a,n,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}var x=e.querySelector(".main-search__errorMessages"),N=e.querySelector(".main-favorites__errorMessages"),w=function(){var e,t=(e=function*(e){var t,a,n=e;try{t=yield fetch(n,c),a=yield t.json()}catch(e){var r,s=e.toString();r="TypeError: Failed to fetch"===s?"\n        <p>ERROR CODE: ".concat("001","</p>\n        <p>SIN RESPUESTA DE LA APLICACIÓN</p>\n        <p>VALIDE LA CONEXIÓN A INTERNET</p>\n      "):"<p>".concat(s,"</p>"),x?x.innerHTML=r:N&&(N.innerHTML=r)}return{response:t,dataJson:a}},function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){A(s,n,r,i,o,"next",e)}function o(e){A(s,n,r,i,o,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),D=e.querySelector(".main-search__pagination"),R=e.querySelector(".main-search__pagination__last"),U=e.querySelector(".main-search__pagination__next"),P=e.querySelector(".main-search__pagination__span");function B(e,t,a,n,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}var M=e.getElementById("moviesDiv"),q=e.getElementById("search-loader"),O=e.querySelector(".main-search__lastSearch.none"),F=e.querySelector(".main-search__lastSearch__span"),k=e.querySelector(".main-search__errorMessages"),Y=e.querySelector(".main-search__lastResult"),H=e.querySelector(".main-search__lastResult__span"),j=e.querySelector(".main-search__pagination"),J=e.querySelector(".main-search__favorites"),G=function(){var a,r=(a=function*(a){var r,s=I(),i=e.createDocumentFragment(),o=0,c=0;q.classList.remove("none"),M.classList.add("none"),O.classList.remove("none"),F.textContent=s,k.classList.add("none");try{var{dataJson:d}=yield w(a);if(q.classList.add("none"),M.classList.remove("none"),"False"===d.Response)throw Y.classList.add("none"),j.classList.add("none"),new Error("".concat(d.Error));"True"===d.Response&&d.Search&&(r=d.Search,o=d.totalResults,c=Math.ceil(o/n.moviesForPage),Y.classList.remove("none"),H.textContent=o,M.textContent="",(e=>{P.textContent=n.page,1===n.page&&1===e?D.classList.add("none"):1===n.page&&e>1?(D.classList.remove("none"),U.classList.remove("none"),R.classList.add("none")):n.page>1&&n.page<e?(D.classList.remove("none"),R.classList.remove("none"),U.classList.remove("none")):n.page>1&&n.page>=e&&(D.classList.remove("none"),R.classList.remove("none"),U.classList.add("none"))})(c),r.forEach((t=>{var a=e.createElement("div");a.classList.add("main-search__movies__movie");var r=e.createElement("button");r.classList.add("main-search__movies__movie__button");var s=f().id;n.arrayUsers=h(),n.arrayUsers.find((e=>(e.id===s&&e.favorites.find((e=>(e.imdbId===t.imdbID&&(r.classList.add("movieIsFavorite"),J.classList.remove("none")),!1))),!1))),r.textContent="⭐",r.setAttribute("data-imdbId",t.imdbID);var o=e.createElement("img");o.classList.add("main-search__movies__movie__image"),o.src="N/A"!==t.Poster?t.Poster:"assets/img/no-image.jpg",o.alt=t.Title?t.Title:"No title",o.setAttribute("data-imdbId",t.imdbID);var c=e.createElement("span");c.classList.add("main-search__movies__movie__spanTitle"),c.textContent=t.Title?t.Title:"No title";var d=e.createElement("span");d.classList.add("main-search__movies__movie__spanYear"),d.textContent=t.Year?t.Year:"No Year";var l=e.createElement("span");l.classList.add("main-search__movies__movie__spanType"),l.textContent=t.Type?t.Type:"No Type";var m=e.createElement("span");m.classList.add("main-search__movies__movie__spanImdbId"),m.setAttribute("data-imdbId",t.imdbID),a.appendChild(r),a.appendChild(o),a.appendChild(c),a.appendChild(d),a.appendChild(l),a.appendChild(m),i.appendChild(a)})),M.appendChild(i))}catch(e){var l,m=e.toString();l="Error: Movie not found!"===m?"\n        <p>Lo sentimos, sin resultados...</p>\n        <p>Movie not found!</p>\n      ":"TypeError: Cannot read property 'Response' of undefined"===m?"\n        <p>ERROR CODE: ".concat("002","</p>\n        <p>SIN DATA NI RESPUESTA DE LA APLICACIÓN</p>\n        <p>VALIDE LA CONEXIÓN A INTERNET</p>\n      "):"<p>".concat(m,"</p>"),"/search.html"===t.location.pathname&&(M.innerHTML="",k.classList.remove("none"),k.innerHTML="",k.innerHTML=l)}},function(){var e=this,t=arguments;return new Promise((function(n,r){var s=a.apply(e,t);function i(e){B(s,n,r,i,o,"next",e)}function o(e){B(s,n,r,i,o,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();function $(e,t,a,n,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}var V=e.getElementById("search-loader"),X=e.getElementById("modalMovies"),z=function(){var t,a=(t=function*(t){V.classList.remove("none");var a=e.createDocumentFragment();try{var{dataJson:r}=yield w(t);if(V.classList.add("none"),"False"===r.Response)throw new Error("".concat(r.Error));if("True"===r.Response){var s=e.createElement("div");s.classList.add("main-search__modal-movies__movieContent");var i=e.createElement("div");i.classList.add("main-search__modal-movies__movieContent__imageButton");var o=e.createElement("img");o.classList.add("main-search__modal-movies__movieContent__imageButton__image"),o.src="N/A"!==r.Poster?r.Poster:"assets/img/no-image.jpg",o.alt=r.Title?r.Title:"No title",o.setAttribute("data-imdbId",r.imdbID);var c=e.createElement("button");c.classList.add("main-search__modal-movies__movieContent__imageButton__button");var d=f().id;n.arrayUsers=h(),n.arrayUsers.find((e=>(e.id===d&&e.favorites.find((e=>(e.imdbId===r.imdbID&&c.classList.add("movieIsFavorite"),!1))),!1))),c.textContent="⭐",c.setAttribute("data-imdbId",r.imdbID),i.appendChild(o),i.appendChild(c),s.appendChild(i);var l=e.createElement("div");l.classList.add("main-search__modal-movies__movieContent__info");var m=e.createElement("span");m.classList.add("main-search__modal-movies__movieContent__info__spanTitle"),m.textContent=r.Title?r.Title:"No title";var v=e.createElement("span");v.classList.add("main-search__modal-movies__movieContent__info__spanYear"),v.textContent=r.Year?r.Year:"No Year";var p=e.createElement("span");p.classList.add("main-search__movies__movie__info__spanType"),p.textContent=r.Type?r.Type:"No Type";var _=e.createElement("span");_.classList.add("main-search__modal-movies__movieContent__info__spanRuntime"),_.textContent=r.Runtime?r.Runtime:"No Runtime";var u=e.createElement("span");u.classList.add("main-search__modal-movies__movieContent__info__spanLanguage"),u.textContent=r.Language?r.Language:"No Language";var g=e.createElement("span");g.classList.add("main-search__modal-movies__movieContent__info__spanGender"),g.textContent=r.Genre?r.Genre:"No Gender";var L=e.createElement("span");L.classList.add("main-search__modal-movies__movieContent__info__spanCountry"),L.textContent=r.Country?r.Country:"No Country";var E=e.createElement("span");E.classList.add("main-search__modal-movies__movieContent__info__spanActors"),E.textContent=r.Actors?r.Actors:"No Actors";var y=e.createElement("span");y.classList.add("main-search__modal-movies__movieContent__info__spanDirector"),y.textContent=r.Director?r.Director:"No Director";var C=e.createElement("span");C.classList.add("main-search__modal-movies__movieContent__info__spanPlot"),C.textContent=r.Plot?r.Plot:"No Plot",l.appendChild(m),l.appendChild(v),l.appendChild(p),l.appendChild(_),l.appendChild(u),l.appendChild(g),l.appendChild(L),l.appendChild(E),l.appendChild(y),l.appendChild(C),s.appendChild(l),a.appendChild(s),X.innerHTML="",X.appendChild(a)}}catch(e){var I,b=e.toString();I="TypeError: Cannot read property 'Response' of undefined"===b?"\n        <p>ERROR CODE: ".concat("002","</p>\n        <p>SIN DATA NI RESPUESTA DE LA APLICACIÓN</p>\n        <p>VALIDE LA CONEXIÓN A INTERNET</p>\n      "):"<p>".concat(b,"</p>"),X&&(X.innerHTML="",X.classList.add("modalErrorMessage"),X.innerHTML=I)}},function(){var e=this,a=arguments;return new Promise((function(n,r){var s=t.apply(e,a);function i(e){$(s,n,r,i,o,"next",e)}function o(e){$(s,n,r,i,o,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}();function Z(e,t,a,n,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(n,r)}function K(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var s=e.apply(t,a);function i(e){Z(s,n,r,i,o,"next",e)}function o(e){Z(s,n,r,i,o,"throw",e)}i(void 0)}))}}var Q,W,ee,te=e.getElementById("favorites-loader"),ae=e.getElementById("favoritesMoviesContainer"),ne=e.querySelector(".main-favorites__errorMessages"),re=e.getElementById("favoritesSpan"),se=function(){var t=K((function*(){te.classList.remove("none"),ae.classList.add("none"),ne.classList.add("none");var t=e.createDocumentFragment(),a=f().id;n.arrayUsers=h();var r=0;n.arrayUsers.find((n=>{if(n.id===a&&n.favorites.length>0){var s=n.favorites.length;re.textContent=s,n.favorites.forEach(function(){var a=K((function*(a){r+=1;var{imdbId:n}=a,o="".concat(i).concat(n);try{var{dataJson:c}=yield w(o);if(te.classList.add("none"),ae.classList.remove("none"),"False"===c.Response)throw new Error("".concat(c.Error));var d=e.createElement("div");d.classList.add("main-favorites__moviesContainer__movieContainer");var l=e.createElement("button");l.classList.add("main-favorites__moviesContainer__movieContainer__button"),l.classList.add("movieIsFavorite"),l.textContent="⭐",l.setAttribute("data-imdbId",c.imdbID),d.appendChild(l);var m=e.createElement("img");m.classList.add("main-favorites__moviesContainer__movieContainer__image"),m.src="N/A"!==c.Poster?c.Poster:"assets/img/no-image.jpg",m.alt=c.Title?c.Title:"No title",m.setAttribute("data-imdbId",c.imdbID),d.appendChild(m);var v=e.createElement("span");v.classList.add("main-favorites__moviesContainer__movieContainer__spanTitle"),v.textContent=c.Title?c.Title:"No title",d.appendChild(v);var p=e.createElement("span");p.classList.add("main-favorites__moviesContainer__movieContainer__spanYear"),p.textContent=c.Year?c.Year:"No Year",d.appendChild(p);var _=e.createElement("span");_.classList.add("main-search__movies__movie__spanType"),_.textContent=c.Type?c.Type:"No Type",d.appendChild(_);var u=e.createElement("span");u.classList.add("main-search__movies__movie__spanImdbId"),u.setAttribute("data-imdbId",c.imdbID),d.appendChild(u),t.appendChild(d),r===s&&ae.appendChild(t)}catch(e){var h,f=e.toString();h="TypeError: Cannot read property 'Response' of undefined"===f?"\n                <p>ERROR CODE: ".concat("002","</p>\n                <p>SIN DATA NI RESPUESTA DE LA APLICACIÓN</p>\n                <p>VALIDE LA CONEXIÓN A INTERNET</p>\n              "):"<p>".concat(f,"</p>"),ne&&(ae.innerHTML="",ne.classList.remove("none"),ne.innerHTML="",ne.innerHTML=h)}}));return function(e){return a.apply(this,arguments)}}())}return!1}))}));return function(){return t.apply(this,arguments)}}(),ie=e.querySelectorAll("[data-light]"),oe=e.querySelector(".main-search__user__theme__icon"),ce=e=>{n.arrayUsers=h(),ie.forEach((e=>e.classList.add("lightTheme"))),t.location.pathname.includes("/search.html")&&(oe.textContent="🌙"),n.arrayUsers.find((t=>{var a=t;return a.id===e&&(a.theme="lightmode",u(t),_()),!1}))},de=e=>{n.arrayUsers=h(),ie.forEach((e=>e.classList.remove("lightTheme"))),t.location.pathname.includes("/search.html")&&(oe.textContent="☀️"),n.arrayUsers.find((t=>{var a=t;return a.id===e&&(a.theme="darkmode",u(t),_()),!1}))},le=()=>{var a=e.createElement("div"),n=e.querySelector(".footer");t.navigator.onLine?(a.textContent="nuevamente conectado",a.classList.add("onLine"),a.classList.remove("offLine"),setTimeout((()=>{t.location.reload()}),5e3)):(a.textContent="sin conexión",a.classList.add("offLine"),a.classList.remove("onLine")),n.insertAdjacentElement("beforeend",a),setTimeout((()=>{a.textContent="",a.classList.remove("onLine"),a.classList.remove("offLine")}),5e3)},me=e.querySelector(".scroll-top-btn"),ve=(a(209),a(869),a(767),a(214),e.getElementById("formLogin")),pe=e.getElementById("login-loader"),_e=e.querySelector(".main-search__user"),ue=e.querySelector(".main-search__user__span"),he=e.getElementById("favoritesButton"),fe=e.getElementById("formSearch"),ge=e.querySelector(".main-search__lastSearch__span"),Le=e.querySelector(".main-search__pagination"),Ee=e.getElementById("moviesDiv"),ye=e.getElementById("modalMovies"),Ce=e.getElementById("favoritesButtonHome"),Ie=e.getElementById("favoritesSpan"),be=e.getElementById("favoritesMoviesContainer");if(W=f(),"/search.html"!==(ee=window.location.pathname)&&"/favorites.html"!==ee||W||d(),e.addEventListener("DOMContentLoaded",(()=>{E.forEach((t=>{var a=e.createElement("span");a.id=t.name,a.textContent=t.title,a.classList.add("form-input-error","none"),t.insertAdjacentElement("afterend",a)})),e.addEventListener("keyup",(a=>{if(a.target.matches(".login-input")){var{name:n,title:r,value:s}=a.target,{pattern:i}=a.target;""===s?(e.getElementById(n).classList.add("is-active"),e.getElementById(n).textContent="username"===n?"Nombre de usuario requerido":"Contraseña requerida"):e.getElementById(n).textContent=r,"username"!==n||i&&""!==i&&i===g||(i=g,alert("Alerta: Posible manipulación inadecuada del html en línea. (username patern)"),t.location.reload()),"password"!==n||i&&""!==i&&i===L||(i=L,alert("Alerta: Posible manipulación inadecuada del html en línea. (password patern)"),t.location.reload()),s.length>=0&&(new RegExp(i).exec(s)?e.getElementById(n).classList.remove("is-active"):e.getElementById(n).classList.add("is-active"))}}))})),t.location.pathname.includes("/")&&ve&&ve.addEventListener("submit",(e=>{var t,a,r,s;(e.preventDefault(),pe.classList.remove("none"),t=y.username.value,a=y.password.value,r=new RegExp(g),s=new RegExp(L),""!==t&&""!==a&&r.exec(t)&&s.exec(a))?(((e,t)=>{n.arrayUsers=h();var a=!1;null===n.arrayUsers?n.arrayUsers=[]:n.arrayUsers.find((n=>(n.name===e&&n.password===t?(a=!0,u(n)):a=!1,a))),!1===a?(((e,t)=>{var a={id:p(),name:e,password:t,lastSearch:"",theme:"darkmode",favorites:[]};n.arrayUsers.push(a),_(),u(a)})(e,t),l()):l()})(ve.username.value.toLowerCase(),ve.password.value),ve.reset(),pe.classList.add("none")):(alert("Alerta submit: Posible manipulación inadecuada del html en línea"),window.location.reload())})),t.location.pathname.includes("/search.html")){T(),(()=>{var e=f().id;n.arrayUsers=h(),n.arrayUsers.find((t=>{if(t.id===e){var a,{lastSearch:n}=t;""!==n?(a="".concat(o).concat(n),G(a)):(n="series",a="".concat(o).concat(n),C(n),G(a))}return!1}))})();var Te=f();ue.textContent=Te.name.toLowerCase(),_e.addEventListener("click",(e=>{if(e.preventDefault(),e.target.matches(".main-search__user__button")&&(sessionStorage.removeItem("session"),d()),e.target.matches(".main-search__user__theme__icon")){var t=e.target.textContent,a=f().id;"☀️"===t?ce(a):de(a)}})),he.addEventListener("click",(e=>{e.preventDefault(),document.location.href="favorites.html"})),fe.addEventListener("submit",(e=>{e.preventDefault(),n.page=1;var t=fe.search.value.toLowerCase(),a="".concat(o).concat(t);fe.reset(),C(t),G(a)})),ge.addEventListener("click",(e=>{e.preventDefault();var t=e.target.textContent;fe.search.value=t,fe.search.focus()})),Le.addEventListener("click",(e=>{e.preventDefault();var t=I();e.target.matches(".main-search__pagination__last")?n.page-=1:e.target.matches(".main-search__pagination__next")&&(n.page+=1);var a="".concat(o).concat(t,"&page=").concat(n.page);G(a)})),Ee.addEventListener("click",(e=>{e.preventDefault();var t=e.target;if(t.matches(".main-search__movies__movie__button")){t.classList.toggle("movieIsFavorite");var a=t.getAttribute("data-imdbId");S(a)}})),Ee.addEventListener("click",(t=>{t.preventDefault();var a=t.target;if(a.classList.contains("main-search__movies__movie__image")){e.body.classList.add("overflowModal");var n=a.getAttribute("data-imdbId"),r="".concat(i).concat(n);ye.classList.add("showModal"),z(r)}})),ye.addEventListener("click",(t=>{t.preventDefault(),t.target.classList.contains("main-search__modal-movies")&&(e.body.classList.remove("overflowModal"),ye.classList.remove("showModal"))})),ye.addEventListener("click",(e=>{e.preventDefault();var t=e.target;if(t.matches(".main-search__modal-movies__movieContent__imageButton__button")){var a=t.getAttribute("data-imdbId");t.classList.toggle("movieIsFavorite"),Ee.querySelectorAll(".main-search__movies__movie").forEach((e=>{e.children[5].dataset.imdbid===a&&e.children[0].classList.toggle("movieIsFavorite")})),S(a)}}))}t.location.pathname.includes("/favorites.html")&&(se(),Ce.addEventListener("click",(e=>{e.preventDefault(),l()})),be.addEventListener("click",(e=>{e.preventDefault();var t=e.target;if(t.matches(".main-favorites__moviesContainer__movieContainer__button")){var a=t.getAttribute("data-imdbId");be.querySelectorAll(".main-favorites__moviesContainer__movieContainer").forEach((e=>{e.children[5].dataset.imdbid===a&&(e.children[0].classList.toggle("movieIsFavorite"),e.children[0].parentElement.remove())})),S(a),Ie.textContent=(()=>{var e,t=f().id;return n.arrayUsers=h(),n.arrayUsers.find((a=>(a.id===t&&(e=a.favorites.length>0?a.favorites.length:0),!1))),e})()}}))),(t.location.pathname.includes("/search.html")||t.location.pathname.includes("/favorites.html"))&&(Q=f().id,n.arrayUsers=h(),n.arrayUsers.find((e=>(e.id===Q&&("darkmode"===e.theme?de(Q):ce(Q)),!1))),t.addEventListener("scroll",(a=>{a.preventDefault(),(t.pageYOffset||e.documentElement.scrollTop)>1500?me.classList.remove("hidden"):me.classList.add("hidden")})),me.addEventListener("click",(e=>{e.preventDefault(),t.scrollTo({behavior:"smooth",top:0})}))),t.location.pathname.includes("/")&&(window.addEventListener("online",(()=>le())),window.addEventListener("offline",(()=>le())))}()}();
//# sourceMappingURL=main.75a240fdc397c2b16ed0.js.map